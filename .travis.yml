# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -U -DskipRTests -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -U -DskipRTests clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: ML7XxPhJ6XaQkKDRZGIIY6laTdqqdmDDS3G6iuPBDPgsBNhnKHSwbRapWClX4kLPDxs0VmWf8zxx0x+lDB6l59c3bXMHKt4SZ49sXxextqxceVSJ40GxK/P2dHHpCzCJsPoP+ErjuT/lYj6OX24dcqO19WBcQDWzTG8hyf2c8gpPpkWcuvzdHa03H5cjoXPNdgG9r4XnU4a2UOBjUctEAA9v1H474/aSHMo66Lo/0jTpaye3WvsUXmm5k4YJCFV2BcqX+CPRQ1TsuSErNbeUROzqU22oc/MLC9BfqMJC4qvfDaDUT5yl57PN2AkhnXAb/azr2/ax3d+71WHg6l3hXnpqt6oQgw2Ns8TfBn7AObS4Qq6Xv112NxiNtthw50c8+00RTy6BuR5TNjoOL27OLFz0yBCOr+IVWDeRT+3eWQ72LU90+QjQ71YpMFpmo1GC/qsd6XvwiRd0TOsys3D7OmE0RYfBxJRhIBs2U95A0xCzwpz2m3HPPFCag3KXIDBbBFs7XvKhZPNhxoAwOsbjSX/bDsS1YlmBQw3wzdlQpT1wrHbvID9aVsh5s+uNpXFzoGzCkvCpotf4FGPC1k4ymEmLZpKtJ0aQwN7s2WBkbkpAskX9fZWJ23eHnDSlXxHKvyeAz+L76HzMRYBIBF+I9Gxh9Zh4MC0uMYMb6V+x+qg=
  - secure: Gj6QpgC/WSg2eOKNNOcsKJ4uXXxZYLxzo3HYoPGFlJs1qR5Co74wxC0Z/2ujgbapmrIFRmyvTlIxe04VmnXMVEVkan22FqmJOmGHCzhdWWO9lG892Kmy+9HwXsuve4NAFPkFl5UBgoObS1bVaI3QA4Pigk2mERJBwLJqrW2Shn4PL2rSZyZAnrFz32AeFsKlMvmcRwqibIUaLXAOjyfNAly3r1vK8l2YGWWqTq8LZL0NaBP556yqmM++nknOej/jDpAgxmz64Xqj3HmdoR/Vv5UQM37I8wV5/rfLnZXeDO6W6hB7ebQCO8GARdTN9p+l51nVTeCHhEovhRcFSqTKsERL/XZ15vqoeW97XI9p0kE+NcP9kk5iDn/e8rCFWmAXij1fy+Vig7aR46eWAPFU15MVSJVUd+B/+ClqLHF9DjIDYVF7pFHcCmWX8u4ijqW3QC0VRyBKM+cEDFtd3b2XCnAAiQfHr2QLRDjnMgo57fPIbo/TQhC4d89KnrHzhXFSaY4b3KgTdHfWQ1bAe9w6NGmLfRks8OCZNlEtaAeSwPIZzNL3uqtRgKWQT3t0l0X5H0tBSuxKr1ZMdEJJcmCNiGIHSEejnumWRyHcw+SA+umMcnZl6bCsUZdgl2w97xdoZlSec7a5VnynuTeUFrV6e+1gwUOqb+a1vBRg+UiLb1U=
  - secure: PA/jGr0e3ArwlYaCJ8G65tFOEfXkyGTMGirO+jU4CZcVYvwTTK5CPuV0vi6yiCle8PUGWMPdM81EvI7sMXkUyvePEavH4RqUSZoFISt7uaKPvtRgkC02yTo7mSKusFhD6fZa6jS2kqem7sPi9pE7OZ9gZiUBPkBHXBlHg845Z9FyVEXkNqJclgeviKEcr77BX+4MZnO27HKfeYSTlg26LDosSeoIg2GbyIPWYvFsiwyScmxvzJF4ckdss3W3mzorC+Ux7KISqPR+xE88qSDp0blumbQjEiIBX827UUh1VGMPrsmQ7I1C8DRWOvSk6blqlFnB9uOz3ROvfC7ymvt2cedWulUTzS72LrjvwsvYWl8qLLSijngfiDvaSw8rMb4QhogOI9vNXUgsgya5iV99pqj4HyKtYPkSezEOCGSG/5zhU13sVHTZqVQTbZt4bcZ9eAHjZl+kO1Ki4xKBjGdOiVKniyAM1lLjfsTzcdThW6Chbqnwj0KZ46fIlPGRsDNmjEjsnxusOu5WyJeivgD23yE4jts37C6oW3z72BOs8w6FDfnCkSfwFz11ufDnilZI2QevV38nPWdXUuJcwF3GzNhgzL9F3weAbT/JvRGrSKXpcEPB7xEzSngSUOlgvRXK7S/BlOHU+sKNVK6Wck6aSRz+qumq0Z1tHbqF7buRRmQ=
  - secure: XOkdeA8ohUIWm8cNjt/AgHR/st5wJhE94d+al0CT8TQVxMWNYJAhwiDrPBfYMD2iRSopBwkETxDr4GPnMlQv3U/FqgoR6gMIDtOlArmjBgfsJifV6ZtnfB/7Sa7k+QvJj/2JS9Gn/NbcyUvjOfBTjzJlLQeA1YL5lBYWQO6CXMV/yAbGbskH4eCWOoN6J1yjh/n0ZDhCiVVQVzCWPSt6Xv9PvCRAGFU3LnNZZUXdjpENkcvQFwMhNRfZMH3vaONLB5Mj9CZvPwUOhapU6bcFKTad5eSTxG718IRwL8mZrw+MVIOjwQIhmTKIJ11SonSM/Ox90j32j7oVJle1R/2a3xi/HsjfyX0sPrz0Kfrup87IdYLbLluyHvlpqWf8njobVQ0kNVW1zwAFFUKr80YiqUN97Vvdv91g71V0utoz3YJXeRKaYdWW2JKWQFK2MdnhDU493ztImqGIBYR+U1Ca8xFqLqKU76Q7HXqvczRrydob941nLB/CHdT8V6WoXxVNtiC5U4hdrVlp1mvz8nSPcF3RkNdc0YXvS0WCeGD5KOqEnmuaV7a8iNtDigLG49otmtQI6wqX6gf6SAuH6biZYiWqKqU76aBUHgEz3+3y1byOR+f+FpdetqANgJxqpur5vdKaWXZNCG14jDESGnTxgg3iUMhsWjOcMlLGDZBL9Hg=
  - secure: ffNgsbcGJ59RGPKf0SijQb7edC4Y5tb7nvFQdLcf+Ny3mWSlB28Ydeo8gCR7lOodUuH5wHwvSqshQQwk7yIlz9uB/agwJ0yW0cLHwuDMAAHGQ4LnZ0zPntIZes360I/ZdTcred6fiMURZLnhxjAkqHVBswv/XL1XTrhL2HVkosTFkCr6hkz7VzxMatjo40MWFIied2tVnba5G3/2KvT6oXGUALAWa5tHRDjWJDHE8/33PtwERhdBeBrnZdhJGbGzs0N4a2FEpREUyVV5r2QK8AYHAA+9wdcDHeG8YjXjrz3Wegl/tWVO0s+tnSEchBdR6TRfmy7ttUZVOnD4Q7+hKH83+1uknEcLo7s3M/H2lMiS7LMZaHh9n5QF7FWQXYTGuDl7mzN6XVYYoDXo14+r6eWwiGMSNFw3sxZQfheHzgCH79uvUC6qjpo3aPFY59ctzb2zU8XqZc7DlH1w6Uiyes8+lKq8Pb9TM8cveT5kzdqkNFCIn5rJX7jh6OOklBX9MHTMb8VkWXfxhsrNjwHl5OwNNSw1Q3axMED2fNTqWLhrhveTlvSDVVV5AC8XevIdEKSbIkMNUJbwJPUn9VMhVev/Y7EKcA+DeD92FBmjUdlonNrkmDg9UfkVqmvVGiBIL+3Gr0rOlzp7JdhEU+M+jS71KhY8cOr/jqNezmuuQr0=
  - secure: NTAWctYMa4Y3T8YTa6eZPf8IwjVRX3HeY/DZ5OcNvvfC2M4lMPRqSE8243TyHZHbH68ejIwoCgQ6dXV0nxdojRpyfVwzMidp/xAyMnGtVsn9ylvgYsS/2Hm7e/jTd/vwb7Q+5PAXZpcsj3eq+eJnl2254Mq8uMqrfp/ObGMAQZdzslbnQn1VynHiPTvpnLyxyMun9Qcjc187sF3LZSoR4uS2iJE7aCxzXntwK9fpw9TQDRebJMnSzOEnppNIx+WAfpQdRgoes8rA99HR3Zr5QaoSCt1kF2SjBZV5g6edYt2NDsWSGtx1Rxq0D3aMKV5v5nopjDD5jffusQym4HR60mievKFKo/V5zcgNVoCdwrIgcqHhN1RTKLPYaePkRl+9HCUru3hqDm/73AfjpJ5cCgNNVHPjP+om/3k0Z5TfvdSITtmqfVDyMDN7ogx0cqeUp4F8BBOtHJDwGTBwTWj6CfmYbJ/WHuYOH1zBuQ8P1L7C20wJyLxHt0cdlnc3F1bWbI9/HOZwTzVoo8j3qoUon24jwbXxWcwUmN2pq6omsb5TU60apCpPm/gi7ZHNOQn/mLxayWnGNcKguK7GC3k1KDUQER4aG/EF7BOyW7xKf3Um0lbdK6zbbDmZKjfJiAAZrwldxj1kPzWZg53A3B00LuwKV1fAFjOwCPUvczeQWEM=
  - secure: ZE5+3LEa+1bRCUPa85e5qsNRvSZ3bpR+EYdiUGN/jT2ZKCXR3FyQjUPAuf7sY3w+T//9CMQurx/0nsvHU7nK8Q215Z3KCfcui87fNbkLaKOz89RtJRFD2tBlBn0DqMtk0RzgpBxz8U7FGwX2dys0EpIu385e7VtDcnj1DTAHM9PYquY8uBp+N9NaEVZReUXzZ06A7FVe5dFGcrfB3ZIkwT2y0jgVzEsmwXr5jA2hbvi1BUfdM9iRgdnO3lFT7tAU3lzXsrE1UuA/8nc2EFJZlymE6xUWvIg3OYpjqHYDRptQZ40blZGbI7XXWcDrazDwZ5BdXnvHkqnmhN4xaY1mFLJYy80TyC+yE+nu/YLHwwUTsc2K7T2+ZWWxkNv8AviF7wN8NKTz+1DWKlptHhaA87xlg1xJAun7f9n79JJXmr6F/1C6qFnOcohCAGbmHVCYBe0uz6ngJj53+y2nxXtxKdT59bs7eub3j7WOR+d+SCI4n+SFqd8dyTN3YzHP4ImO14EJn7VkCmqBVmZ/4gH4aVj0pzUbP3b2h+Lm2bSiXS908QMhdDQjROFurbsmSGLGLd4HYKdxq01g0F+J1LMk3ZHATIpmMgd4DOgSD74g3GpPE5GIqAFBEqVH8pbsmfovJAVzR46Zz3UOwe7SSMy4ZyF/GQ31Klq238KbWZeHO5U=
